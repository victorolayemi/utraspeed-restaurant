!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(self.webpackChunkprimer=self.webpackChunkprimer||[]).push([[580],{36580:function(t,o,r){r.r(o),r.d(o,{FoodCategoryModule:function(){return T}});var i=r(38583),a=r(49983),s=r(38550),c=r(12630),l=r(91841),u=r(92340),d=r(22238),g=r(3679),m=r(37716),p=r(35618),f=r(51095),h=r(76627),v=r(7539);function y(e,t){1&e&&(m.\u0275\u0275elementStart(0,"strong"),m.\u0275\u0275text(1,"Cuisine Name"),m.\u0275\u0275elementEnd())}function C(e,t){1&e&&m.\u0275\u0275text(0),2&e&&m.\u0275\u0275textInterpolate1(" ",t.value," ")}function x(e,t){1&e&&m.\u0275\u0275element(0,"img",3)}function b(e,t){if(1&e){var n=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"p",8),m.\u0275\u0275elementStart(1,"mat-checkbox",9),m.\u0275\u0275listener("change",function(){var e=m.\u0275\u0275restoreView(n).index;return m.\u0275\u0275nextContext(2).checkChange(e)}),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()}if(2&e){var o=t.index,r=m.\u0275\u0275nextContext(2);m.\u0275\u0275advance(1),m.\u0275\u0275property("formControlName",o)("value",r.categories[o].id),m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(r.categories[o].name)}}function w(e,t){1&e&&(m.\u0275\u0275elementStart(0,"div"),m.\u0275\u0275text(1,"At least one order must be selected"),m.\u0275\u0275elementEnd())}function k(e,t){if(1&e){var n=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"form",4),m.\u0275\u0275listener("ngSubmit",function(){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onSubmit()}),m.\u0275\u0275template(1,b,3,3,"p",5),m.\u0275\u0275template(2,w,2,0,"div",6),m.\u0275\u0275elementStart(3,"button",7),m.\u0275\u0275text(4,"Submit"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()}if(2&e){var o=m.\u0275\u0275nextContext();m.\u0275\u0275property("formGroup",o.form),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngForOf",o.ordersFormArray.controls),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",!o.form.valid)}}var S,I=new d.vA,N=((S=function(){function t(n,o,r,i){e(this,t),this.http=n,this.router=o,this.dialog=r,this.rows=[],this.temp=[],this.ColumnMode=s.hq,this.isLoading=!1,this.total=0,this.per_page=20,this.p=1,this.config={disableClose:!1,panelClass:"custom-overlay-pane-class",hasBackdrop:!0,backdropClass:"",width:"",height:"",minWidth:"",minHeight:"",maxWidth:I.maxWidth,maxHeight:"",position:{top:"",bottom:"",left:"",right:""},data:{message:"Jazzy jazz jazz"}},this.numTemplateOpens=0}return n(t,[{key:"ngOnInit",value:function(){this.getCategory({offset:0})}},{key:"updateFilter",value:function(e){var t=e.target.value.toLowerCase(),n=this.temp.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t)||!t});this.rows=n}},{key:"getCategory",value:function(e){var t=this;this.isLoading=!0,this.p=e.offset;var n=localStorage.getItem("token");console.log(n);var o=JSON.parse(localStorage.getItem("currentUser")),r=new l.WM({Authorization:"Bearer "+n,Accept:"application/json","Content-Type":"application/json"});this.http.get("".concat(u.N.apiUrl,"stores/settings?store_id=").concat(o.id),{headers:r}).subscribe(function(e){var n=JSON.parse(e.data[0].cuisine),o="";0==n.length&&(t.rows=[],t.total=0,t.isLoading=!1),n.length>0&&(n.forEach(function(e,t,n){o+=t==n.length-1?"id[]=".concat(e):"id[]=".concat(e,"&")}),t.getCuisineName(o))})}},{key:"getCuisineName",value:function(e){var t=this;console.log(e);var n=localStorage.getItem("token"),o=new l.WM({Authorization:"Bearer "+n,Accept:"application/json","Content-Type":"application/json"});this.http.get("".concat(u.N.apiUrl,"stores/bulk-cuisine?").concat(e),{headers:o}).subscribe(function(e){console.log(e.data),t.rows=e.data,t.total=e.total,t.isLoading=!1})}},{key:"openAddCat",value:function(){var e=this;this.dialog.open(j,{width:"300px"}).afterClosed().subscribe(function(t){e.getCategory({offset:0})})}}]),t}()).\u0275fac=function(e){return new(e||S)(m.\u0275\u0275directiveInject(l.eN),m.\u0275\u0275directiveInject(c.F0),m.\u0275\u0275directiveInject(d.uw),m.\u0275\u0275directiveInject(i.K0))},S.\u0275cmp=m.\u0275\u0275defineComponent({type:S,selectors:[["app-food-fategory"]],decls:9,vars:9,consts:[["fxLayout","row",2,"padding","20px 10px 20px 8px","right","0"],["fxLayoutAlign","end center","mat-raised-button","","color","primary",3,"click"],["aria-label","add category"],["rowHeight","auto",1,"material",3,"rows","columnMode","headerHeight","footerHeight","loadingIndicator","externalPaging","count","offset","limit","page"],["name","Name"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""]],template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"div",0),m.\u0275\u0275elementStart(1,"button",1),m.\u0275\u0275listener("click",function(){return t.openAddCat()}),m.\u0275\u0275elementStart(2,"mat-icon",2),m.\u0275\u0275text(3,"add"),m.\u0275\u0275elementEnd(),m.\u0275\u0275text(4," Add/Edit Cuisine"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(5,"ngx-datatable",3),m.\u0275\u0275listener("page",function(e){return t.getCategory(e)}),m.\u0275\u0275elementStart(6,"ngx-datatable-column",4),m.\u0275\u0275template(7,y,2,0,"ng-template",5),m.\u0275\u0275template(8,C,1,1,"ng-template",6),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()),2&e&&(m.\u0275\u0275advance(5),m.\u0275\u0275property("rows",t.rows)("columnMode",t.ColumnMode.force)("headerHeight",50)("footerHeight",50)("loadingIndicator",t.isLoading)("externalPaging",!0)("count",t.total)("offset",t.p)("limit",t.per_page))},directives:[p.xw,f.lW,p.Wh,h.Hw,s.nE,s.UC,s.tk,s.vq],styles:[""]}),S),j=function(){var t=function(){function t(n,o,r,i,a){e(this,t),this.http=n,this.formBuilder=o,this.router=r,this.dialogRef=i,this.data=a,this._dimesionToggle=!1,this.required="This field is required",this.isLoading=!1,this.loading=!1,this.form=this.formBuilder.group({category:new g.FormArray([],A(1))}),this.getCategory()}return n(t,[{key:"ordersFormArray",get:function(){return this.form.controls.category}},{key:"getCategory",value:function(){var e=this;this.isLoading=!0;var t=localStorage.getItem("token"),n=new l.WM({Authorization:"Bearer "+t,Accept:"application/json","Content-Type":"application/json"});this.http.get("".concat(u.N.apiUrl,"stores/cuisine"),{headers:n}).subscribe(function(t){e.categories=t.data,e.addCheckboxes(),console.log(t),e.isLoading=!1})}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"addCheckboxes",value:function(){var e=this;this.categories.forEach(function(){return e.ordersFormArray.push(new g.FormControl(!1))})}},{key:"onSubmit",value:function(){var e=this;this.loading=!0;var t={cuisine:this.form.value.category.map(function(t,n){return t?e.categories[n].id:null}).filter(function(e){return null!==e})},n=JSON.stringify(t);console.log(n);var o=localStorage.getItem("token"),r=JSON.parse(localStorage.getItem("currentUser")),i=new l.WM({Authorization:"Bearer "+o,Accept:"application/json","Content-Type":"application/json"});this.http.put("".concat(u.N.apiUrl,"stores/settings/").concat(r.id),n,{headers:i}).subscribe(function(t){console.log(t),e.loading=!1}),this.dialogRef.close()}},{key:"checkChange",value:function(e){console.log(this.form.value)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m.\u0275\u0275directiveInject(l.eN),m.\u0275\u0275directiveInject(g.FormBuilder),m.\u0275\u0275directiveInject(c.F0),m.\u0275\u0275directiveInject(d.so),m.\u0275\u0275directiveInject(d.WI))},t.\u0275cmp=m.\u0275\u0275defineComponent({type:t,selectors:[["add-cat"]],decls:5,vars:2,consts:[["mat-dialog-content",""],["src","assets/images/loading.png","width","30","height","30",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["src","assets/images/loading.png","width","30","height","30"],[3,"formGroup","ngSubmit"],["formArrayName","category",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","color","primary"],["formArrayName","category"],["color","primary",3,"formControlName","value","change"]],template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"h3"),m.\u0275\u0275text(1," Add/Edit Cuisine"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(2,"div",0),m.\u0275\u0275template(3,x,1,0,"img",1),m.\u0275\u0275template(4,k,5,3,"form",2),m.\u0275\u0275elementEnd()),2&e&&(m.\u0275\u0275advance(3),m.\u0275\u0275property("ngIf",t.isLoading),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",!t.isLoading))},directives:[d.xY,i.O5,g.\u0275NgNoValidate,g.NgControlStatusGroup,g.FormGroupDirective,i.sg,f.lW,g.FormArrayName,v.oG,g.NgControlStatus,g.FormControlName],styles:[""]}),t}();function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return t.controls.map(function(e){return e.value}).reduce(function(e,t){return t?e+t:e},0)>=e?null:{required:!0}}}var E=[{path:"",component:N},{path:"add",component:r(78661).D}],F=r(15566),L=r(93738),z=r(77746),M=r(33935),W=r(67441),O=r(82613),B=r(12522),T=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=m.\u0275\u0275defineInjector({imports:[[i.ez,c.Bz.forChild(E),a.c,s.xD,h.Ps,L.QW,f.ot,W.LD,v.p9,z.ie,d.Is,M.Tx,O.Fk,B.g0,F.o9,g.FormsModule,g.ReactiveFormsModule]]}),t}()}}])}();