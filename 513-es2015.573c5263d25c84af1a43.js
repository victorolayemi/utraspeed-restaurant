"use strict";(self.webpackChunkprimer=self.webpackChunkprimer||[]).push([[513],{37970:function(e,t,n){n.r(t),n.d(t,{FoodMenuModule:function(){return O}});var o=n(38583),a=n(49983),r=n(38550),l=n(12630),i=n(91841),m=n(92340),s=n(37716),p=n(49344),c=n(98295),d=n(35618),u=n(51095),g=n(76627);function f(e,t){1&e&&(s.\u0275\u0275elementStart(0,"strong"),s.\u0275\u0275text(1,"Image"),s.\u0275\u0275elementEnd())}function h(e,t){1&e&&s.\u0275\u0275element(0,"img",15),2&e&&s.\u0275\u0275property("src",t.value,s.\u0275\u0275sanitizeUrl)}function x(e,t){1&e&&(s.\u0275\u0275elementStart(0,"strong"),s.\u0275\u0275text(1,"Item Name"),s.\u0275\u0275elementEnd())}function S(e,t){1&e&&s.\u0275\u0275text(0),2&e&&s.\u0275\u0275textInterpolate1(" ",t.value," ")}function b(e,t){1&e&&(s.\u0275\u0275elementStart(0,"strong"),s.\u0275\u0275text(1,"Price"),s.\u0275\u0275elementEnd())}function w(e,t){1&e&&s.\u0275\u0275text(0),2&e&&s.\u0275\u0275textInterpolate1(" ",t.value," ")}function E(e,t){1&e&&(s.\u0275\u0275elementStart(0,"strong"),s.\u0275\u0275text(1,"Offer Amount"),s.\u0275\u0275elementEnd())}function y(e,t){1&e&&s.\u0275\u0275text(0),2&e&&s.\u0275\u0275textInterpolate1(" ",t.value," ")}function v(e,t){1&e&&(s.\u0275\u0275elementStart(0,"strong"),s.\u0275\u0275text(1,"In Stock"),s.\u0275\u0275elementEnd())}function I(e,t){1&e&&s.\u0275\u0275text(0),2&e&&s.\u0275\u0275textInterpolate1(" ",t.value," ")}const C=function(e){return["/edit-food-menu",e]};function k(e,t){1&e&&(s.\u0275\u0275elementStart(0,"button",16),s.\u0275\u0275elementStart(1,"mat-icon",4),s.\u0275\u0275text(2,"edit"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e&&s.\u0275\u0275property("routerLink",s.\u0275\u0275pureFunction1(1,C,t.value))}function L(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",17),s.\u0275\u0275listener("click",function(){const t=s.\u0275\u0275restoreView(e).row;return s.\u0275\u0275nextContext().deleteItem(t)}),s.\u0275\u0275elementStart(1,"mat-icon",4),s.\u0275\u0275text(2,"delete"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}}const M=function(){return["/add-food-menu"]},j=[{path:"",component:(()=>{class e{constructor(e,t,n){this.toastr=e,this.http=t,this.router=n,this.rows=[],this.temp=[],this.ColumnMode=r.hq,this.isLoading=!1,this.total=0,this.p=1}ngOnInit(){this.getCategory({offset:0}),this.baseUrl=m.N.baseUrl,console.log(this.baseUrl)}fetch(e){const t=new XMLHttpRequest;t.open("GET","assets/data/company.json"),t.onload=()=>{e(JSON.parse(t.response))},t.send()}updateFilter(e){const t=e.target.value.toLowerCase(),n=this.temp.filter(e=>-1!==e.name.toLowerCase().indexOf(t)||!t);this.rows=n}getCategory(e){this.isLoading=!0,console.log(e.offset+1),this.p=e.offset;let t=e.offset+1,n=localStorage.getItem("token"),o=JSON.parse(localStorage.getItem("currentUser")),a=new i.WM({Authorization:"Bearer "+n,Accept:"application/json","Content-Type":"application/json"});this.http.get(`${m.N.apiUrl}stores/menu-item?store=${o.id}&page=${t}`,{headers:a}).subscribe(e=>{this.rows=e.data,this.total=e.total,console.log(e),this.isLoading=!1},e=>{this.toastr.error(e)})}deleteItem(e){this.isLoading=!0;let t=localStorage.getItem("token"),n=new i.WM({Authorization:"Bearer "+t,Accept:"application/json","Content-Type":"application/json"});this.http.delete(`${m.N.apiUrl}stores/menu-item/${e.id}`,{headers:n}).subscribe(e=>{this.toastr.success("Successfully","Deleted"),this.getCategory({offset:this.p}),this.isLoading=!1},e=>{this.toastr.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(p._W),s.\u0275\u0275directiveInject(i.eN),s.\u0275\u0275directiveInject(l.F0))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["app-food-menu"]],decls:27,vars:11,consts:[[1,"mb-1",2,"width","100%"],["matInput","","placeholder","Type to filter the name column...","required","",3,"keyup"],["fxLayout","row",2,"padding","20px 10px 20px 8px","right","0"],["fxLayoutAlign","end center","mat-raised-button","","color","primary",3,"routerLink"],["aria-label","add category"],["rowHeight","auto",1,"material",3,"rows","columnMode","headerHeight","footerHeight","loadingIndicator","externalPaging","count","offset","limit","page"],["prop","item_images"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["prop","item_name"],["prop","item_price"],["prop","offer_amount"],["prop","is_available"],["prop","id"],["name",""],["width","30px","height","30px",3,"src"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","",2,"color","red",3,"click"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"mat-form-field",0),s.\u0275\u0275elementStart(1,"input",1),s.\u0275\u0275listener("keyup",function(e){return t.updateFilter(e)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(2,"div",2),s.\u0275\u0275elementStart(3,"button",3),s.\u0275\u0275elementStart(4,"mat-icon",4),s.\u0275\u0275text(5,"add"),s.\u0275\u0275elementEnd(),s.\u0275\u0275text(6," Add New Menu Item"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"ngx-datatable",5),s.\u0275\u0275listener("page",function(e){return t.getCategory(e)}),s.\u0275\u0275elementStart(8,"ngx-datatable-column",6),s.\u0275\u0275template(9,f,2,0,"ng-template",7),s.\u0275\u0275template(10,h,1,1,"ng-template",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"ngx-datatable-column",9),s.\u0275\u0275template(12,x,2,0,"ng-template",7),s.\u0275\u0275template(13,S,1,1,"ng-template",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(14,"ngx-datatable-column",10),s.\u0275\u0275template(15,b,2,0,"ng-template",7),s.\u0275\u0275template(16,w,1,1,"ng-template",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"ngx-datatable-column",11),s.\u0275\u0275template(18,E,2,0,"ng-template",7),s.\u0275\u0275template(19,y,1,1,"ng-template",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(20,"ngx-datatable-column",12),s.\u0275\u0275template(21,v,2,0,"ng-template",7),s.\u0275\u0275template(22,I,1,1,"ng-template",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(23,"ngx-datatable-column",13),s.\u0275\u0275template(24,k,3,3,"ng-template",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(25,"ngx-datatable-column",14),s.\u0275\u0275template(26,L,3,0,"ng-template",8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(3),s.\u0275\u0275property("routerLink",s.\u0275\u0275pureFunction0(10,M)),s.\u0275\u0275advance(4),s.\u0275\u0275property("rows",t.rows)("columnMode",t.ColumnMode.force)("headerHeight",50)("footerHeight",50)("loadingIndicator",t.isLoading)("externalPaging",!0)("count",t.total)("offset",t.p)("limit",15))},directives:[c.KE,a.Nt,d.xw,u.lW,d.Wh,l.rH,g.Hw,r.nE,r.UC,r.tk,r.vq],styles:[""]}),e})()},{path:"add",component:n(50243).mw}];var N=n(15566),F=n(93738),H=n(77746),U=n(33935),A=n(12178),W=n(3679),_=n(82613),z=n(12522);let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[o.ez,l.Bz.forChild(j),a.c,r.xD,g.Ps,F.QW,u.ot,H.ie,A.Cv,U.Tx,_.Fk,z.g0,N.o9,W.FormsModule,W.ReactiveFormsModule]]}),e})()}}]);